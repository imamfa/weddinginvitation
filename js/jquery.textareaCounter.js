!function(a){a.fn.textareaCount=function(r,e){var n,r=a.extend({maxCharacterSize:-1,originalStyle:"originalTextareaInfo",warningStyle:"warningTextareaInfo",warningNumber:20,displayFormat:"#input characters | #words words"},r),t=a(this);a("<div class='charleft'>&nbsp;</div>").insertAfter(t),t.width();var i=(n=t,n.next(".charleft"));i.addClass(r.originalStyle);var l=0,o=r.maxCharacterSize,c=0,s=0;function u(){return i.html(function a(){var e,n=t.val(),u=n.length;if(r.maxCharacterSize>0){u>=r.maxCharacterSize&&(n=n.substring(0,r.maxCharacterSize));var d=h(n),p=r.maxCharacterSize-d;if(f()||(p=r.maxCharacterSize),u>p){var m=this.scrollTop;t.val(n.substring(0,p)),this.scrollTop=m}i.removeClass(r.warningStyle),p-u<=r.warningNumber&&i.addClass(r.warningStyle),l=t.val().length+d,f()||(l=t.val().length),s=g(v(t.val())),c=o-l}else{var d=h(n);l=t.val().length+d,f()||(l=t.val().length),s=g(v(t.val()))}return e=r.displayFormat,e=(e=e.replace("#input",l)).replace("#words",s),o>0&&(e=(e=e.replace("#max",o)).replace("#left",c)),e}()),void 0!==e&&e.call(this,{input:l,max:o,left:c,words:s}),!0}function f(){return -1!=navigator.appVersion.toLowerCase().indexOf("win")}function h(a){for(var r=0,e=0;e<a.length;e++)"\n"==a.charAt(e)&&r++;return r}function v(a){var r=(a+" ").replace(/^[^A-Za-z0-9]+/gi,""),e=rExp=/[^A-Za-z0-9]+/gi;return r.replace(e," ").split(" ")}function g(a){return a.length-1}t.bind("keyup",function(a){u()}).bind("mouseover",function(a){setTimeout(function(){u()},10)}).bind("paste",function(a){setTimeout(function(){u()},10)})}}(jQuery);
